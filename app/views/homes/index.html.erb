
<div class="home-container">
  <!-- カレンダー -->
  <div class="calendar-card">
    <h2><%= @current_month.strftime('%Y年 %-m月の献立記録') %></h2>
      <div class="calendar-month-switch">
        <%= link_to "< #{(@current_month - 1.month).strftime('%-m月')}", root_path(month: (@current_month - 1.month)), class: "month-btn" %>
        <%= link_to "#{(@current_month + 1.month).strftime('%-m月')} >", root_path(month: (@current_month + 1.month)), class: "month-btn" %>
      </div>

    <table class="calendar-table">
      <tr>
        <th>日</th><th>月</th><th>火</th><th>水</th><th>木</th><th>金</th><th>土</th>
      </tr>

      <% @calendar_dates.each_slice(7) do |week| %>
        <tr>
          <% week.each do |date| %>
            <td class="<%= (date && date == Date.current ? 'today ' : '') + (date && @meals_by_date[date] ? 'has-meals' : 'no-meals') %>">
              <% if date %>
                <div class="calendar-date"><%= date.day %></div>
                <% @meals_by_date[date]&.each do |meal| %>
                  <div class="meal-icon" title="<%= meal.title %>">
                    <%= icon_for(meal.icon_type) %>
                  </div>
                <% end %>
              <% end %>
            </td>
          <% end %>
        </tr>
      <% end %>
    </table>
  </div>

  <!-- 投稿ボタン -->
    <%= link_to "📸 今日のご飯を投稿する", new_meal_path, class: "post-button" %>
  
  <!-- 🔮 AI献立アシスタント -->
  <div class="meal-ai-box">
    <h3>✨ AI献立アシスタント</h3>
    <p>※この機能は準備中です。</p>

    <button class="ai-btn">💡 次の献立アイデアを提案してもらう</button>
  </div>
</div>