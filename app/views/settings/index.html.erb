<div class="settings-container">

  <h1 class="settings-title">設定</h1>

  <!-- 家族・アカウント設定 -->
  <section class="settings-section">
    <h2 class="section-title">👩‍👧‍👦 家族・アカウント設定</h2>

    <div class="settings-row">
      <label>家族グループID</label>
      <div class="input-group">
        <input type="text" value="<%= current_user.family.code %>" id="family-code-field" class="settings-id-field" readonly>
        <button onclick="copyFamilyCode()" class="btn-copy">コピー</button>
      </div>
    </div>
    <p class="settings-hint">※このコードを使用して家族に参加できます</p>

    <div class="settings-row border-top">
      <label>メンバー管理</label>
      <%= link_to "管理する >", settings_path(anchor: "family-members"), class: "btn-link" %>
    </div>

    <section class="settings-section">
      <h2 class="section-title">👩‍👧‍👦 家族メンバー一覧</h2>

      <% if @users.present? %>
        <ul class="family-member-list">
          <% @users.each do |member| %>
            <li class="member-item <%= 'current-user' if member == current_user %>">
              👤 <%= member.name %>
              <% if member == current_user %>
                <span class="member-badge">あなた</span>
              <% end %>
            </li>
          <% end %>
        </ul>
      <% else %>
        <p>まだ他のメンバーはいません ✨</p>
      <% end %>
    </section>

    <div class="settings-row border-top">
      <label>プロフィール編集</label>
      <%= link_to "編集する >", edit_user_registration_path, class: "btn-link" %>
    </div>
  </section>

  <script>
    function copyFamilyCode() {
      const field = document.getElementById("family-code-field");
      field.select();
      field.setSelectionRange(0, 999); // iOS対応
      document.execCommand("copy");
      alert("📋 家族グループIDをコピーしました！");
    }
  </script>

  

  <!-- 通知・効率化設定 -->
  <section class="settings-section">
    <h2 class="section-title">🔔 通知・効率化設定</h2>

    <!-- 投稿リマインダー -->
    <div class="settings-row">
      <label>投稿リマインダー</label>
      <input type="checkbox">
    </div>

    <!-- 通知時間 -->
    <div class="settings-row">
      <label>通知時間</label>
      <select>
        <option>18:00</option>
        <option>19:00（推奨）</option>
        <option>20:00</option>
      </select>
    </div>

    <!-- 新しい項目：家族メモの更新通知 -->
    <div class="settings-row">
      <label>家族メモの更新通知</label>
      <input type="checkbox">
    </div>
  </section>

  <hr class="settings-divider">

  <!-- 🚪ログアウト（右寄せで自然な位置） -->
  <div class="logout-area">
    <%= link_to "ログアウト", destroy_user_session_path, data: { turbo_method: :delete, turbo_confirm: "本当にログアウトしますか？\nログインが必要になります。" }, class: "logout-button" %>
  </div>

  <!-- 戻るボタン（中央揃え） -->
  <div class="center">
    <%= link_to "＜ 戻る", root_path, class: "btn-back" %>
  </div>

</div>
